CREATE SCHEMA `Covid`;
USE Covid;

SELECT * FROM ciudadanos;
SELECT * FROM test_covid_positivo;
SELECT * FROM vacunas_1_dosis;
SELECT * FROM vacunas_2_dosis;
SELECT * FROM vacunas_3_dosis;
SELECT * FROM transporte;
SELECT * FROM resultados;
SELECT * FROM viviendas;

-- Table: Tabla_Ciudadanos
CREATE TABLE CIUDADANOS (
    DNI_PERSONA_TESTEADA int NOT NULL,
    NOMBRE_PERSONA TEXT(100) NOT NULL,
    GENERO_PERSONA TEXT(100) NOT NULL,
    NACIMIENTO_PERSONA DATE NOT NULL,
    DOMICILIO_PERSONA varchar(100) NOT NULL,
    CONSTRAINT PK_CIUDADANOS PRIMARY KEY (DNI_PERSONA_TESTEADA)
    );
    
-- Table: Test_Covid_Positivo
CREATE TABLE TEST_COVID_POSITIVO (
    ID_TEST int NOT NULL,
    DNI_PERSONA_TESTEADA int NOT NULL,
    DOMICILIO_PERSONA_TESTEADA_POSITIVO varchar(100) NOT NULL,
    CONTACTO_DE_PERSONA_TESTEADA_POSITIVO text(100) NOT NULL,
    CONSTRAINT PK_TESTCOVID PRIMARY KEY (ID_TEST)
    );
    
-- Table: Tabla_Vacuna_1_Dosis
CREATE TABLE VACUNAS_1_DOSIS (
    ID_VACUNA_1_DOSIS int NOT NULL,
    DNI_PERSONA_TESTEADA int NOT NULL,
    MARCA_PERSONA_VACUNADA varchar(100) NOT NULL,
    DOSIS_N1_PERSONA_VACUNADA int NOT NULL,
    DONDE_SE_APLICO varchar(100) NOT NULL,
    CONSTRAINT PK_VACUNAS_1_DOSIS PRIMARY KEY (ID_VACUNA_1_DOSIS)
    );
    
    CREATE TABLE VACUNAS_2_DOSIS (
    ID_VACUNA_2_DOSIS int NOT NULL,
    DNI_PERSONA_TESTEADA int NOT NULL,
    MARCA_PERSONA_VACUNADA varchar(100) NOT NULL,
    DOSIS_N1_PERSONA_VACUNADA int NOT NULL,
    DONDE_SE_APLICO varchar(100) NOT NULL,
    CONSTRAINT PK_VACUNAS_2_DOSIS PRIMARY KEY (ID_VACUNA_2_DOSIS)
    );
    
        CREATE TABLE VACUNAS_3_DOSIS (
    ID_VACUNA_3_DOSIS int NOT NULL,
    DNI_PERSONA_TESTEADA int NOT NULL,
    MARCA_PERSONA_VACUNADA varchar(100) NOT NULL,
    DOSIS_N1_PERSONA_VACUNADA int NOT NULL,
    DONDE_SE_APLICO varchar(100) NOT NULL,
    CONSTRAINT PK_VACUNAS_3_DOSIS PRIMARY KEY (ID_VACUNA_3_DOSIS)
    );
    
    -- Table: Tabla_Transporte
CREATE TABLE TRANSPORTE (
    ID_TRANSPORTE int NOT NULL,
    DNI_PERSONA_TESTEADA int NOT NULL,
    TRANSPORTE_PUBLICO text(100) NOT NULL,
    CONSTRAINT PK_TRANSPORTE PRIMARY KEY (ID_TRANSPORTE)
    );
    
	-- Table: Tabla_Resultados
CREATE TABLE RESULTADOS (
    ID_RESULTADOS int NOT NULL,
    DNI_PERSONA_TESTEADA int NOT NULL,
    TEST_COVID varchar(60) NOT NULL,
    CONSTRAINT PK_RESULTADOS PRIMARY KEY (ID_RESULTADOS)
    );
    
	-- Table: Tabla_Viviendas
CREATE TABLE VIVIENDAS (
    DNI_CONTACTO_COVID_POSITIVO int NOT NULL,
    DNI_PERSONA_TESTEADA int NOT NULL,
    TIPO_CONTACTO_COVID_POSITIVO text(100) NOT NULL,
    CONSTRAINT PK_VIVIENDAS PRIMARY KEY (DNI_CONTACTO_COVID_POSITIVO)
    );
    
    ALTER TABLE TEST_COVID_POSITIVO
ADD CONSTRAINT fk_TEST_COVID_POSITIVO FOREIGN KEY (DNI_PERSONA_TESTEADA) REFERENCES CIUDADANOS (DNI_PERSONA_TESTEADA);

    ALTER TABLE VACUNAS_1_DOSIS
ADD CONSTRAINT fk_VACUNAS_1_DOSIS FOREIGN KEY (DNI_PERSONA_TESTEADA) REFERENCES CIUDADANOS (DNI_PERSONA_TESTEADA);

    ALTER TABLE VACUNAS_2_DOSIS
ADD CONSTRAINT fk_VACUNAS_2_DOSIS FOREIGN KEY (DNI_PERSONA_TESTEADA) REFERENCES CIUDADANOS (DNI_PERSONA_TESTEADA);

    ALTER TABLE VACUNAS_3_DOSIS
ADD CONSTRAINT fk_VACUNAS_3_DOSIS FOREIGN KEY (DNI_PERSONA_TESTEADA) REFERENCES CIUDADANOS (DNI_PERSONA_TESTEADA);

    ALTER TABLE TRANSPORTE
ADD CONSTRAINT fk_TRANSPORTE FOREIGN KEY (DNI_PERSONA_TESTEADA) REFERENCES CIUDADANOS (DNI_PERSONA_TESTEADA);

    ALTER TABLE RESULTADOS
ADD CONSTRAINT fk_RESULTADOS FOREIGN KEY (DNI_PERSONA_TESTEADA) REFERENCES CIUDADANOS (DNI_PERSONA_TESTEADA);

    ALTER TABLE VIVIENDAS
ADD CONSTRAINT fk_VIVIENDAS FOREIGN KEY (DNI_PERSONA_TESTEADA) REFERENCES CIUDADANOS (DNI_PERSONA_TESTEADA);
